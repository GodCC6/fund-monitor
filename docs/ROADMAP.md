# Fund Monitor 产品路线图

> 分析日期：2026-02-18
> 基于对现有代码库的完整审查

---

## 现状总结

### 已完成功能

| 模块 | 功能 |
|------|------|
| 后端 | FastAPI + SQLite + akshare 数据源 |
| 估值引擎 | 加权持仓法实时估算NAV，持仓覆盖率计算 |
| 调度器 | 交易时段每30s拉取行情，盘中快照持久化 |
| 图表API | NAV历史 + 沪深300基准对比（多周期） |
| 前端 | 组合列表、组合详情、基金详情、NavChart组件 |

### 已知缺口（触发本路线图）

| 问题 | 影响 |
|------|------|
| 组合详情只显示基金代码，不含名称/个基P&L | 日常用户无法直观判断各基金状态 |
| 添加基金必须手填代码，无搜索 | 操作门槛高，易输错 |
| 持仓数据为季报，不提示时效 | 用户不知道估值参考的是几个月前的持仓 |
| 组合无历史价值曲线 | 无法回顾组合表现趋势 |
| 每日官方NAV无自动刷新 | 盘后数据滞后，影响次日估值基准 |
| 多基金持仓重叠不可见 | 用户以为分散，实际可能高度集中 |

---

## 功能路线图

### P0 — 基础体验补齐（影响每次使用）

| 编号 | 功能 | 计划文档 |
|------|------|----------|
| P0-A | 组合页显示基金名称 + 逐基金P&L | [2026-02-18-portfolio-fund-display.md](plans/2026-02-18-portfolio-fund-display.md) |
| P0-B | 添加基金时支持名称搜索 | [2026-02-18-fund-search.md](plans/2026-02-18-fund-search.md) |

**预计工作量：** P0-A 约3小时，P0-B 约2小时

---

### P1 — 核心价值功能（大幅提升产品完整度）

| 编号 | 功能 | 计划文档 |
|------|------|----------|
| P1-A | 组合净值历史曲线 | [2026-02-18-portfolio-value-history.md](plans/2026-02-18-portfolio-value-history.md) |
| P1-B | 每日官方NAV定时刷新 + 持仓时效提示 | [2026-02-18-daily-nav-refresh.md](plans/2026-02-18-daily-nav-refresh.md) |

**预计工作量：** P1-A 约5小时，P1-B 约2小时

---

### P2 — 差异化功能（竞争壁垒）

| 编号 | 功能 | 计划文档 |
|------|------|----------|
| P2-A | 组合持仓重叠分析 | [2026-02-18-holdings-overlap-analysis.md](plans/2026-02-18-holdings-overlap-analysis.md) |

**预计工作量：** 约4小时

---

### P3 — 工程质量提升

| 编号 | 功能 | 计划文档 |
|------|------|----------|
| P3 | 错误降级 + 手动刷新 + 排序 | [2026-02-18-engineering-improvements.md](plans/2026-02-18-engineering-improvements.md) |

**预计工作量：** 约3小时

---

## 推荐实施顺序

```
第1天:  P0-A（组合基金显示）→ P0-B（基金搜索）
第2-3天: P1-B（每日NAV刷新）→ P1-A（组合历史曲线）
第4-5天: P2-A（持仓重叠分析）
第6天:  P3（工程改进）
```

P0-A 是性价比最高的单项改动：**改动量小（后端扩展一个 schema，前端改一个列表渲染），但每次打开组合详情都能感受到改善。**

---

## 技术架构约定

- **后端测试**：pytest + pytest-asyncio，所有新 API 端点必须有对应测试
- **前端**：无 UI 组件库，纯 CSS + Vue3 Composition API，遵循现有样式规范
- **数据库迁移**：新增表直接在 `models/` 中添加，通过 `Base.metadata.create_all` 自动建表
- **A股色彩约定**：涨 = `#ff4444`（红），跌 = `#00c853`（绿）
- **估值标注**：所有非官方净值必须显示 `估` 橙色徽章
